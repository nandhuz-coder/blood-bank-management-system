"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[203],{73:(e,a,s)=>{s.d(a,{A:()=>c});var r=s(5043),l=s(6462),o=s(9166),n=s(9456),i=s(6037),t=s(2145),d=(s(2342),s(907));const m=()=>{const e=(0,n.wA)();return{handleLogin:async(a,s,r,l,o)=>{if(a.preventDefault(),!l||!s||!r)return t.oR.error("Please provide all fields");try{var n,m;const a=await e((0,i.pH)({email:s,password:r,role:l})),p=(0,d.pH)(a);t.oR.success("Login Successful!"),"admin"===(null===(n=p.user)||void 0===n?void 0:n.role)?o("/admin"):"hospital"===(null===(m=p.user)||void 0===m?void 0:m.role)?o("/hospital-page"):o("/")}catch(p){console.error(p),t.oR.error(p||"Login failed. Please try again.")}},handleRegister:async(a,s,r)=>{if(a.preventDefault(),console.log(s),!s.role||!s.email||!s.password)return t.oR.error("Please provide all required fields");try{const a=await e((0,i.TU)(s));(0,d.pH)(a),t.oR.success("Registration successful! Redirecting to login..."),r("/login")}catch(l){console.error(l),t.oR.error(l||"Registration failed. Please try again.")}}}};var p=s(579);const c=e=>{let{formType:a,submitBtn:s,formTitle:n}=e;const i=(0,l.Zp)(),{handleLogin:t,handleRegister:d}=m(),[c,h]=(0,r.useState)({email:"",password:"",role:"donor",name:"",organisationName:"",hospitalName:"",address:"",phone:"",website:"",bloodGroup:""}),[u,g]=(0,r.useState)({}),x=e=>{h({...c,[e.target.name]:e.target.value}),g((a=>({...a,[e.target.name]:""})))};return(0,p.jsx)("div",{children:(0,p.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{let e={};return c.email?/\S+@\S+\.\S+/.test(c.email)||(e.email="Invalid email format."):e.email="Email is required.",c.password?c.password.length<6&&(e.password="Password must be at least 6 characters."):e.password="Password is required.","register"===a&&("admin"!==c.role&&"donor"!==c.role||c.name||(e.name="Name is required."),"organisation"!==c.role||c.organisationName||(e.organisationName="Organisation Name is required."),"hospital"!==c.role||c.hospitalName||(e.hospitalName="Hospital Name is required."),c.address||(e.address="Address is required."),"donor"===c.role&&(c.bloodGroup||(e.bloodGroup="Blood Group is required.")),c.phone?/^\d{10}$/.test(c.phone)||(e.phone="Phone number must be 10 digits."):e.phone="Phone number is required."),g(e),0===Object.keys(e).length})()&&("login"===a?t(e,c.email,c.password,c.role,i):d(e,c,i))},children:[(0,p.jsx)("h1",{className:"text-center",children:n}),(0,p.jsx)("hr",{}),(0,p.jsx)("div",{className:"d-flex mb-3",children:["donor","admin","organisation","hospital"].map((e=>(0,p.jsxs)("div",{className:"form-check ms-2",children:[(0,p.jsx)("input",{type:"radio",className:"form-check-input",name:"role",id:`${e}Radio`,value:e,onChange:x,checked:c.role===e}),(0,p.jsx)("label",{htmlFor:`${e}Radio`,className:"form-check-label",children:e.charAt(0).toUpperCase()+e.slice(1)})]},e)))}),"login"===a?(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.A,{labelFor:"email",labelText:"Email",inputType:"email",name:"email",value:c.email,onChange:x,autoComplete:"email"}),u.email&&(0,p.jsx)("p",{className:"text-danger",children:u.email}),(0,p.jsx)(o.A,{labelFor:"password",labelText:"Password",inputType:"password",name:"password",value:c.password,onChange:x,autoComplete:"current-password"}),u.password&&(0,p.jsx)("p",{className:"text-danger",children:u.password})]}):(0,p.jsxs)(p.Fragment,{children:[("admin"===c.role||"donor"===c.role)&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.A,{labelFor:"name",labelText:"Name",inputType:"text",name:"name",value:c.name,onChange:x,autoComplete:"name"}),u.name&&(0,p.jsx)("p",{className:"text-danger",children:u.name})]}),"organisation"===c.role&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.A,{labelFor:"organisationName",labelText:"Organisation Name",inputType:"text",name:"organisationName",value:c.organisationName,onChange:x}),u.organisationName&&(0,p.jsx)("p",{className:"text-danger",children:u.organisationName})]}),"hospital"===c.role&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.A,{labelFor:"hospitalName",labelText:"Hospital Name",inputType:"text",name:"hospitalName",value:c.hospitalName,onChange:x}),u.hospitalName&&(0,p.jsx)("p",{className:"text-danger",children:u.hospitalName})]}),(0,p.jsx)(o.A,{labelFor:"email",labelText:"Email",inputType:"email",name:"email",value:c.email,onChange:x,autoComplete:"email"}),u.email&&(0,p.jsx)("p",{className:"text-danger",children:u.email}),(0,p.jsx)(o.A,{labelFor:"password",labelText:"Password",inputType:"password",name:"password",value:c.password,onChange:x,autoComplete:"new-password"}),u.password&&(0,p.jsx)("p",{className:"text-danger",children:u.password}),(0,p.jsx)(o.A,{labelFor:"address",labelText:"Address",inputType:"text",name:"address",value:c.address,onChange:x}),u.address&&(0,p.jsx)("p",{className:"text-danger",children:u.address}),(0,p.jsx)(o.A,{labelFor:"phone",labelText:"Phone",inputType:"tel",name:"phone",value:c.phone,onChange:x,pattern:"[0-9]{10}",placeholder:"10-digit number"}),u.phone&&(0,p.jsx)("p",{className:"text-danger",children:u.phone}),"donor"===c.role&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(o.A,{labelFor:"bloodGroup",labelText:"Blood Group",inputType:"text",name:"bloodGroup",value:c.bloodGroup,onChange:x,placeholder:"O+, O-, AB+, AB-, A-, A+, B-,B+"}),u.bloodGroup&&(0,p.jsx)("p",{className:"text-danger",children:u.bloodGroup})]}),(0,p.jsx)(o.A,{labelFor:"website",labelText:"Website",inputType:"url",name:"website",value:c.website,onChange:x,placeholder:"https://example.com"}),u.website&&(0,p.jsx)("p",{className:"text-danger",children:u.website})]}),(0,p.jsxs)("div",{className:"d-flex flex-row justify-content-between",children:[(0,p.jsx)("p",{children:"login"===a?(0,p.jsxs)(p.Fragment,{children:["Not registered yet? ",(0,p.jsx)(l.N_,{to:"/register",children:"Register Here!"})]}):(0,p.jsxs)(p.Fragment,{children:["Already a user? ",(0,p.jsx)(l.N_,{to:"/login",children:"Login Here!"})]})}),(0,p.jsx)("button",{className:"btn btn-primary",type:"submit",children:s})]})]})})}},1258:(e,a,s)=>{s.d(a,{A:()=>l});s(5043);var r=s(579);const l=()=>(0,r.jsx)("div",{className:"loader-container",children:(0,r.jsx)("div",{className:"loader"})})},6203:(e,a,s)=>{s.r(a),s.d(a,{default:()=>d});var r=s(5043),l=s(73),o=s(9456),n=s(1258),i=s(2145),t=(s(2342),s(579));const d=()=>{const{loading:e,error:a}=(0,o.d4)((e=>e.auth));return(0,r.useEffect)((()=>{a&&i.oR.error(a,{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,theme:"colored"})}),[a]),(0,t.jsx)(t.Fragment,{children:(0,t.jsx)("div",{children:e?(0,t.jsx)(n.A,{}):(0,t.jsxs)("div",{className:"row g-0",children:[(0,t.jsx)("div",{className:"col-md-8 form-banner",children:(0,t.jsx)("img",{src:"/assets/images/banner1.jpg",alt:"Login Banner"})}),(0,t.jsx)("div",{className:"col-md-4 form-container",children:(0,t.jsx)(l.A,{formTitle:"Login Page",submitBtn:"Login",formType:"login"})})]})})})}},9166:(e,a,s)=>{s.d(a,{A:()=>l});s(5043);var r=s(579);const l=e=>{let{labelFor:a,labelText:s,value:l="",onChange:o,name:n,inputType:i="text",placeholder:t="",required:d=!1,min:m,max:p}=e;return(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:a,className:"form-label",children:s}),(0,r.jsx)("input",{className:"form-control",id:a,type:i,name:n,value:l,onChange:o,placeholder:t,required:d,min:m,max:p})]})}}}]);
//# sourceMappingURL=203.1e184f88.chunk.js.map