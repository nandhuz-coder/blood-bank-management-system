"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[39],{641:(e,s,n)=>{n.d(s,{A:()=>i});n(5043);var t=n(9882),o=n(9456),l=n(6462),a=n(2145),r=n(3780),c=n(579);const i=()=>{const{user:e}=(0,o.d4)((e=>e.auth)),s=(0,o.wA)(),n=(0,l.Zp)(),i=e=>{let{closeToast:s}=e;return(0,c.jsxs)("div",{children:[(0,c.jsx)("button",{className:"btn btn-sm btn-danger me-2",onClick:()=>{d(!0),s()},children:"Yes"}),(0,c.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:s,children:"No"})]})},d=e=>{e?(s((0,r.r)()),a.oR.success("Logged out successfully!"),n("/login")):a.oR.dismiss()};return(0,c.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light shadow-sm p-2",children:(0,c.jsxs)("div",{className:"container-fluid d-flex justify-content-between align-items-center",children:[(0,c.jsxs)("div",{className:"navbar-brand d-flex align-items-center",children:[(0,c.jsx)(t.jD9,{color:"red",size:28,className:"me-2"}),(0,c.jsx)("span",{className:"fw-bold",children:"Blood Bank App"})]}),(0,c.jsxs)("ul",{className:"navbar-nav d-flex align-items-center",children:[(0,c.jsx)("li",{className:"nav-item mx-3",children:(0,c.jsxs)("span",{className:"nav-link d-flex align-items-center",children:[(0,c.jsx)(t.Z31,{size:22,className:"me-1"}),(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.hospitalName)," \xa0",(0,c.jsx)("span",{className:"badge bg-secondary",children:null===e||void 0===e?void 0:e.role})]})}),(0,c.jsx)("li",{className:"nav-item mx-3",children:(0,c.jsx)(l.N_,{to:"/",className:"nav-link",children:"Home"})}),(0,c.jsx)("li",{className:"nav-item mx-3",children:(0,c.jsx)("button",{className:"btn btn-danger",onClick:()=>{a.oR.warn("Are you sure you want to logout?",{position:"top-center",autoClose:!1,closeOnClick:!1,draggable:!1,closeButton:e=>(0,c.jsx)(i,{...e})})},children:"Logout"})})]})]})})}},9039:(e,s,n)=>{n.r(s),n.d(s,{default:()=>i});var t=n(5043),o=n(9456),l=n(9285),a=n(406),r=n(2145),c=(n(2342),n(579));const i=()=>{const{user:e}=(0,o.d4)((e=>e.auth)),[s,n]=(0,t.useState)(!1),[i,d]=(0,t.useState)({bloodGroup:"",units:"1"}),[h,u]=(0,t.useState)([]),[m,x]=(0,t.useState)("");(0,t.useEffect)((()=>{j()}),[]);const j=async()=>{try{var e;const s=await a.A.get("/inventory/donor-list");u((null===(e=s.data)||void 0===e?void 0:e.requestData)||[])}catch(s){console.error(s),r.oR.error("An error occurred while fetching donor requests"),u([])}},p=e=>{const{name:s,value:n}=e.target;d({...i,[s]:n})};return(0,c.jsxs)(l.A,{children:[(0,c.jsxs)("div",{className:"container mt-4",children:[(0,c.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[(0,c.jsxs)("h1",{children:["Welcome, ",(0,c.jsx)("span",{className:"text-success",children:null===e||void 0===e?void 0:e.hospitalName})]}),(0,c.jsx)("button",{className:"btn btn-primary",onClick:()=>n(!0),children:"Request Blood"})]}),(0,c.jsx)("h3",{className:"mt-3",children:"Blood Consumer Dashboard"}),(0,c.jsx)("hr",{}),(0,c.jsx)("h4",{className:"mt-4 text-center",children:"Pending Requests"}),(0,c.jsx)("div",{className:"table-responsive",children:0===h.length?(0,c.jsx)("p",{children:"No pending requests"}):(0,c.jsxs)("table",{className:"table table-bordered mt-3",children:[(0,c.jsx)("thead",{className:"table-dark",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Blood Group"}),(0,c.jsx)("th",{children:"Units"}),(0,c.jsx)("th",{children:"Interested Donors"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:h.map((e=>{var s;return(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.bloodGroup}),(0,c.jsx)("td",{children:e.units}),(0,c.jsx)("td",{children:(null===(s=e.donors)||void 0===s?void 0:s.length)||0}),(0,c.jsx)("td",{children:(0,c.jsx)("button",{className:"btn btn-danger btn-sm",onClick:()=>(async e=>{try{await a.A.delete(`/inventory/requests/delete-request/${e}`),r.oR.success("Request deleted successfully"),u(h.filter((s=>s._id!==e)))}catch(s){console.error(s),r.oR.error("An error occurred while deleting the request")}})(e._id),children:"Delete"})})]},e._id)}))})]})}),(0,c.jsx)("h4",{className:"mt-4",children:"Interested Donors"}),(0,c.jsxs)("div",{className:"form-group mb-3",children:[(0,c.jsx)("label",{htmlFor:"filterBloodGroup",children:(0,c.jsx)("strong",{children:"Filter by Blood Group:"})}),(0,c.jsxs)("select",{className:"form-control w-25",id:"filterBloodGroup",value:m,onChange:e=>x(e.target.value),children:[(0,c.jsx)("option",{value:"",children:"All"}),(0,c.jsx)("option",{value:"A+",children:"A+"}),(0,c.jsx)("option",{value:"A-",children:"A-"}),(0,c.jsx)("option",{value:"B+",children:"B+"}),(0,c.jsx)("option",{value:"B-",children:"B-"}),(0,c.jsx)("option",{value:"AB+",children:"AB+"}),(0,c.jsx)("option",{value:"AB-",children:"AB-"}),(0,c.jsx)("option",{value:"O+",children:"O+"}),(0,c.jsx)("option",{value:"O-",children:"O-"})]})]}),h.some((e=>e.donors&&e.donors.length>0))?(0,c.jsxs)("table",{className:"table table-striped",children:[(0,c.jsx)("thead",{className:"table-success",children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Name"}),(0,c.jsx)("th",{children:"Blood Group"}),(0,c.jsx)("th",{children:"Phone"}),(0,c.jsx)("th",{children:"Actions"})]})}),(0,c.jsx)("tbody",{children:h.flatMap((e=>e.donors||[])).filter((e=>""===m||e.bloodGroup===m)).map(((e,s)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.name}),(0,c.jsx)("td",{children:e.bloodGroup}),(0,c.jsx)("td",{children:e.phone}),(0,c.jsx)("td",{children:"pending"===e.action?(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("button",{className:"btn btn-success btn-sm",onClick:()=>(async(e,s)=>{try{(await a.A.post("/inventory/accept-donor",{requestId:s,donorId:e,action:"waiting"})).data.success?(r.oR.success("Donor accepted successfully"),j()):r.oR.info("Can't accept donor")}catch(n){console.error(n),r.oR.error("An error occurred while accepting the donor")}})(e.id,e.requestId),children:"Accept"}),(0,c.jsx)("button",{className:"btn btn-danger btn-sm ml-2",onClick:()=>(async(e,s)=>{try{(await a.A.post("/inventory/accept-donor",{requestId:s,donorId:e,action:"rejected"})).data.success?(r.oR.warn("Donor Rejected successfully"),j()):r.oR.info("Can't accept donor")}catch(n){console.error(n),r.oR.error("An error occurred while accepting the donor")}})(e.id,e.requestId),children:"Reject"})]}):"waiting"===e.action?(0,c.jsx)("button",{className:"btn btn-info btn-sm",onClick:()=>(async(e,s)=>{try{(await a.A.post("/inventory/accept-donor",{requestId:s,donorId:e,action:"accepted"})).data.success?(r.oR.warn("certificate generated successfully"),j()):r.oR.info("Can't generate")}catch(n){console.error(n),r.oR.error("An error occurred while accepting the donor")}})(e.id,e.requestId),children:"approve Certificate"}):"rejected"===e.action?(0,c.jsx)("button",{className:"btn btn-danger disabled btn-sm",children:"Rejected"}):(0,c.jsx)("button",{className:"btn btn-secondary disabled btn-sm",children:"Donated"})})]},s)))})]}):(0,c.jsx)("p",{children:"No donors found"})]}),s&&(0,c.jsx)("div",{className:"modal show d-block",children:(0,c.jsx)("div",{className:"modal-dialog",children:(0,c.jsxs)("div",{className:"modal-content",children:[(0,c.jsxs)("div",{className:"modal-header",children:[(0,c.jsx)("h5",{className:"modal-title",children:"Request Blood"}),(0,c.jsx)("button",{type:"button",className:"close btn btn-danger",onClick:()=>n(!1),children:"\xd7"})]}),(0,c.jsx)("div",{className:"modal-body",children:(0,c.jsxs)("form",{onSubmit:async s=>{s.preventDefault();try{const s=await a.A.post("/inventory/requests/create-request",{...i,hospitalId:null===e||void 0===e?void 0:e._id});r.oR.success("Request submitted successfully"),u(s.data.data),n(!1)}catch(t){console.error(t),r.oR.error("An error occurred while submitting the request")}},children:[(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Blood Group"}),(0,c.jsxs)("select",{className:"form-control",name:"bloodGroup",value:i.bloodGroup,onChange:p,required:!0,children:[(0,c.jsx)("option",{value:"",children:"Select Blood Group"}),(0,c.jsx)("option",{value:"A+",children:"A+"}),(0,c.jsx)("option",{value:"A-",children:"A-"}),(0,c.jsx)("option",{value:"B+",children:"B+"}),(0,c.jsx)("option",{value:"B-",children:"B-"}),(0,c.jsx)("option",{value:"AB+",children:"AB+"}),(0,c.jsx)("option",{value:"AB-",children:"AB-"}),(0,c.jsx)("option",{value:"O+",children:"O+"}),(0,c.jsx)("option",{value:"O-",children:"O-"})]})]}),(0,c.jsxs)("div",{className:"form-group",children:[(0,c.jsx)("label",{children:"Units"}),(0,c.jsx)("input",{type:"number",className:"form-control",name:"units",value:i.units,onChange:p,min:"1",required:!0})]}),(0,c.jsx)("button",{type:"submit",className:"btn btn-primary mt-3",children:"Submit Request"})]})})]})})})]})}},9285:(e,s,n)=>{n.d(s,{A:()=>c});n(5043);var t=n(641),o=n(9456),l=n(6462),a=n(579);const r=()=>{const e=(0,l.zy)(),{user:s}=(0,o.d4)((e=>e.auth));return(0,a.jsx)("div",{className:"sidebar",children:(0,a.jsx)("div",{className:"menu",children:({donor:[{path:"/donation",name:"Donation",icon:"fa-solid fa-hand-holding-medical"}],hospital:[{path:"/consumer",name:"Consumer",icon:"fa-solid fa-hospital"}],admin:[{path:"/donor-list",name:"Donor List",icon:"fa-solid fa-hand-holding-medical"},{path:"/hospital-list",name:"Hospital List",icon:"fa-solid fa-hospital"}]}[null===s||void 0===s?void 0:s.role]||[]).map((s=>(0,a.jsxs)("div",{className:"menu-item "+(e.pathname===s.path?"active":""),children:[(0,a.jsx)("i",{className:s.icon}),(0,a.jsx)(l.N_,{to:s.path,children:s.name})]},s.path)))})})},c=e=>{let{children:s}=e;return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"header fixed-top shadow-sm bg-light",children:(0,a.jsx)(t.A,{})}),(0,a.jsxs)("div",{className:"d-flex",children:[(0,a.jsx)("div",{className:"sidebar",children:(0,a.jsx)(r,{})}),(0,a.jsx)("div",{className:"content col-md-9",children:s})]})]})}}}]);
//# sourceMappingURL=39.4209ebd7.chunk.js.map