"use strict";(self.webpackChunkclient=self.webpackChunkclient||[]).push([[657],{641:(e,a,s)=>{s.d(a,{A:()=>r});s(5043);var l=s(9882),n=s(9456),t=s(6462),i=s(2145),o=s(3780),d=s(579);const r=()=>{const{user:e}=(0,n.d4)((e=>e.auth)),a=(0,n.wA)(),s=(0,t.Zp)(),r=e=>{let{closeToast:a}=e;return(0,d.jsxs)("div",{children:[(0,d.jsx)("button",{className:"btn btn-sm btn-danger me-2",onClick:()=>{c(!0),a()},children:"Yes"}),(0,d.jsx)("button",{className:"btn btn-sm btn-secondary",onClick:a,children:"No"})]})},c=e=>{e?(a((0,o.r)()),i.oR.success("Logged out successfully!"),s("/login")):i.oR.dismiss()};return(0,d.jsx)("nav",{className:"navbar navbar-expand-lg navbar-light bg-light shadow-sm p-2",children:(0,d.jsxs)("div",{className:"container-fluid d-flex justify-content-between align-items-center",children:[(0,d.jsxs)("div",{className:"navbar-brand d-flex align-items-center",children:[(0,d.jsx)(l.jD9,{color:"red",size:28,className:"me-2"}),(0,d.jsx)("span",{className:"fw-bold",children:"Blood Bank App"})]}),(0,d.jsxs)("ul",{className:"navbar-nav d-flex align-items-center",children:[(0,d.jsx)("li",{className:"nav-item mx-3",children:(0,d.jsxs)("span",{className:"nav-link d-flex align-items-center",children:[(0,d.jsx)(l.Z31,{size:22,className:"me-1"}),(null===e||void 0===e?void 0:e.name)||(null===e||void 0===e?void 0:e.hospitalName)," \xa0",(0,d.jsx)("span",{className:"badge bg-secondary",children:null===e||void 0===e?void 0:e.role})]})}),(0,d.jsx)("li",{className:"nav-item mx-3",children:(0,d.jsx)(t.N_,{to:"/",className:"nav-link",children:"Home"})}),(0,d.jsx)("li",{className:"nav-item mx-3",children:(0,d.jsx)("button",{className:"btn btn-danger",onClick:()=>{i.oR.warn("Are you sure you want to logout?",{position:"top-center",autoClose:!1,closeOnClick:!1,draggable:!1,closeButton:e=>(0,d.jsx)(r,{...e})})},children:"Logout"})})]})]})})}},1258:(e,a,s)=>{s.d(a,{A:()=>n});s(5043);var l=s(579);const n=()=>(0,l.jsx)("div",{className:"loader-container",children:(0,l.jsx)("div",{className:"loader"})})},3657:(e,a,s)=>{s.r(a),s.d(a,{default:()=>p});var l=s(5043),n=s(9456),t=s(6462),i=s(2145),o=(s(2342),s(1258)),d=s(9285),r=s(9166),c=s(406),m=s(579);const h=()=>{const[e,a]=(0,l.useState)("in"),[s,t]=(0,l.useState)(""),[o,d]=(0,l.useState)(""),[h,u]=(0,l.useState)(""),[x,p]=(0,l.useState)({}),{user:v}=(0,n.d4)((e=>e.auth));return(0,m.jsx)(m.Fragment,{children:(0,m.jsx)("div",{className:"modal fade",id:"staticBackdrop","data-bs-backdrop":"static","data-bs-keyboard":"false",tabIndex:-1,"aria-labelledby":"staticBackdropLabel","aria-hidden":"true",children:(0,m.jsx)("div",{className:"modal-dialog",children:(0,m.jsxs)("div",{className:"modal-content",children:[(0,m.jsxs)("div",{className:"modal-header",children:[(0,m.jsx)("h1",{className:"modal-title fs-5",id:"staticBackdropLabel",children:"Manage Blood Record"}),(0,m.jsx)("button",{type:"button",className:"btn-close","data-bs-dismiss":"modal","aria-label":"Close",id:"modal-close-btn"})]}),(0,m.jsxs)("div",{className:"modal-body",children:[(0,m.jsxs)("div",{className:"d-flex mb-3",children:[(0,m.jsx)("label",{className:"me-2",children:"Blood Type:"}),["in","out"].map((s=>(0,m.jsxs)("div",{className:"form-check ms-3",children:[(0,m.jsx)("input",{type:"radio",name:"inventoryType",checked:e===s,value:s,onChange:e=>a(e.target.value),className:"form-check-input",id:`${s}-radio`}),(0,m.jsx)("label",{htmlFor:`${s}-radio`,className:"form-check-label",children:s.toUpperCase()})]},s)))]}),(0,m.jsxs)("select",{className:"form-select "+(x.bloodGroup?"is-invalid":""),value:s,onChange:e=>{t(e.target.value),p((e=>({...e,bloodGroup:""})))},children:[(0,m.jsx)("option",{value:"",disabled:!0,children:"Select Blood Group"}),["O+","O-","AB+","AB-","A+","A-","B+","B-"].map((e=>(0,m.jsx)("option",{value:e,children:e},e)))]}),x.bloodGroup&&(0,m.jsx)("p",{className:"text-danger",children:x.bloodGroup}),(0,m.jsx)(r.A,{labelText:"in"===e?"Donor Email":"Hospital Email",labelFor:"donorEmail",inputType:"email",value:h,onChange:e=>{u(e.target.value),p((e=>({...e,email:""})))}}),x.email&&(0,m.jsx)("p",{className:"text-danger",children:x.email}),(0,m.jsx)(r.A,{labelText:"Quantity (ML)",labelFor:"quantity",inputType:"number",min:"1",value:o,onChange:e=>{d(e.target.value),p((e=>({...e,quantity:""})))}}),x.quantity&&(0,m.jsx)("p",{className:"text-danger",children:x.quantity})]}),(0,m.jsxs)("div",{className:"modal-footer",children:[(0,m.jsx)("button",{type:"button",className:"btn btn-secondary","data-bs-dismiss":"modal",children:"Close"}),(0,m.jsx)("button",{type:"button",className:"btn btn-primary",onClick:async()=>{if((()=>{let e={};return s||(e.bloodGroup="Please select a blood group."),h.trim()?/\S+@\S+\.\S+/.test(h)||(e.email="Invalid email format."):e.email="Email is required.",(!o||o<=0)&&(e.quantity="Quantity must be greater than 0."),p(e),0===Object.keys(e).length})())try{const{data:a}=await c.A.post("/inventory/create-inventory",{email:h,organisation:null===v||void 0===v?void 0:v._id,inventoryType:e,bloodGroup:s,quantity:parseInt(o)});null!==a&&void 0!==a&&a.success&&(i.oR.success("New Record Created"),t(""),d(""),u(""),document.getElementById("modal-close-btn").click())}catch(n){var a,l;i.oR.error((null===(a=n.response)||void 0===a||null===(l=a.data)||void 0===l?void 0:l.message)||"Something went wrong"),console.error(n)}},children:"Submit"})]})]})})})})};var u=s(6178),x=s.n(u);const p=()=>{const{loading:e,error:a,user:s}=(0,n.d4)((e=>e.auth)),[r,u]=(0,l.useState)([]),p=(0,t.Zp)();return(0,l.useEffect)((()=>{(async()=>{try{const{data:e}=await c.A.get("/inventory/get-inventory");null!==e&&void 0!==e&&e.success&&u(null===e||void 0===e?void 0:e.inventory)}catch(a){console.log(a)}})()}),[]),(0,l.useEffect)((()=>{"admin"===(null===s||void 0===s?void 0:s.role)?p("/admin"):"donor"===(null===s||void 0===s?void 0:s.role)?p("/donor-page"):"hospital"===(null===s||void 0===s?void 0:s.role)&&p("/hospital-page")}),[s,p]),(0,l.useEffect)((()=>{a&&i.oR.error(a)}),[a]),(0,m.jsxs)(d.A,{children:[(0,m.jsx)(i.N9,{}),e?(0,m.jsx)(o.A,{}):(0,m.jsxs)("div",{className:"container",children:[(0,m.jsxs)("h4",{className:"ms-4","data-bs-toggle":"modal","data-bs-target":"#staticBackdrop",style:{cursor:"pointer"},children:[(0,m.jsx)("i",{className:"fa-solid fa-plus text-success py-4"}),"Add Inventory"]}),(0,m.jsxs)("table",{className:"table",children:[(0,m.jsx)("thead",{children:(0,m.jsxs)("tr",{children:[(0,m.jsx)("th",{scope:"col",children:"Blood Group"}),(0,m.jsx)("th",{scope:"col",children:"Inventory Type"}),(0,m.jsx)("th",{scope:"col",children:"Quantity"}),(0,m.jsx)("th",{scope:"col",children:"Email"}),(0,m.jsx)("th",{scope:"col",children:"Date & Time"})]})}),(0,m.jsx)("tbody",{children:null===r||void 0===r?void 0:r.map((e=>(0,m.jsxs)("tr",{children:[(0,m.jsx)("td",{children:e.bloodGroup}),(0,m.jsx)("td",{children:e.inventoryType}),(0,m.jsxs)("td",{children:[e.quantity," (ML)"]}),(0,m.jsx)("td",{children:e.email}),(0,m.jsx)("td",{children:x()(e.createdAt).format("DD/MM/YYYY hh:mm A")})]},e._id)))})]}),(0,m.jsx)(h,{})]})]})}},9166:(e,a,s)=>{s.d(a,{A:()=>n});s(5043);var l=s(579);const n=e=>{let{labelFor:a,labelText:s,value:n="",onChange:t,name:i,inputType:o="text",placeholder:d="",required:r=!1,min:c,max:m}=e;return(0,l.jsxs)("div",{className:"mb-3",children:[(0,l.jsx)("label",{htmlFor:a,className:"form-label",children:s}),(0,l.jsx)("input",{className:"form-control",id:a,type:o,name:i,value:n,onChange:t,placeholder:d,required:r,min:c,max:m})]})}},9285:(e,a,s)=>{s.d(a,{A:()=>d});s(5043);var l=s(641),n=s(9456),t=s(6462),i=s(579);const o=()=>{const e=(0,t.zy)(),{user:a}=(0,n.d4)((e=>e.auth));return(0,i.jsx)("div",{className:"sidebar",children:(0,i.jsx)("div",{className:"menu",children:({donor:[{path:"/donation",name:"Donation",icon:"fa-solid fa-hand-holding-medical"}],hospital:[{path:"/consumer",name:"Consumer",icon:"fa-solid fa-hospital"}],admin:[{path:"/donor-list",name:"Donor List",icon:"fa-solid fa-hand-holding-medical"},{path:"/hospital-list",name:"Hospital List",icon:"fa-solid fa-hospital"}]}[null===a||void 0===a?void 0:a.role]||[]).map((a=>(0,i.jsxs)("div",{className:"menu-item "+(e.pathname===a.path?"active":""),children:[(0,i.jsx)("i",{className:a.icon}),(0,i.jsx)(t.N_,{to:a.path,children:a.name})]},a.path)))})})},d=e=>{let{children:a}=e;return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("div",{className:"header fixed-top shadow-sm bg-light",children:(0,i.jsx)(l.A,{})}),(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)("div",{className:"sidebar",children:(0,i.jsx)(o,{})}),(0,i.jsx)("div",{className:"content col-md-9",children:a})]})]})}}}]);
//# sourceMappingURL=657.6e05be9e.chunk.js.map